<form [formGroup]="taskForm" (ngSubmit)="onSubmit()" class="bg-[#E0E5EC] p-8 rounded-[30px] ">
      <h2 class="text-2xl font-bold mb-6 text-[#4D4D4D]">
        {{ isEditMode ? languageService.t.editTask : languageService.t.newTask }}
      </h2>

      <!-- Title -->
      <div class="mb-5">
        <label class="block text-sm font-bold text-gray-500 mb-2 uppercase tracking-wide">{{ languageService.t.title }}</label>
        <input
          formControlName="title"
          type="text"
          [placeholder]="languageService.t.title"
          class="w-full px-6 py-3 rounded-xl bg-[#E0E5EC] shadow-[inset_5px_5px_10px_#bebebe,inset_-5px_-5px_10px_#ffffff] border-none focus:outline-none focus:shadow-[inset_2px_2px_5px_#bebebe,inset_-2px_-2px_5px_#ffffff] transition-all text-gray-700 placeholder-gray-400"
        />
        <p *ngIf="taskForm.get('title')?.touched && taskForm.get('title')?.invalid" class="text-red-400 text-xs mt-2 ml-2">
          {{ languageService.t.titleRequired }}
        </p>
      </div>

      <!-- Description -->
      <div class="mb-5">
        <label class="block text-sm font-bold text-gray-500 mb-2 uppercase tracking-wide">{{ languageService.t.description }}</label>
        <textarea
          formControlName="description"
          rows="3"
          [placeholder]="languageService.t.description"
          class="w-full px-6 py-3 rounded-xl bg-[#E0E5EC] shadow-[inset_5px_5px_10px_#bebebe,inset_-5px_-5px_10px_#ffffff] border-none focus:outline-none focus:shadow-[inset_2px_2px_5px_#bebebe,inset_-2px_-2px_5px_#ffffff] transition-all text-gray-700 placeholder-gray-400"
        ></textarea>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
        <!-- Category -->
        <div>
          <label class="block text-sm font-bold text-gray-500 mb-2 uppercase tracking-wide">{{ languageService.t.category }}</label>
          <div class="relative">
             <select
               formControlName="category"
               class="w-full px-6 py-3 rounded-xl bg-[#E0E5EC] shadow-[inset_5px_5px_10px_#bebebe,inset_-5px_-5px_10px_#ffffff] border-none focus:outline-none text-gray-700 appearance-none cursor-pointer">
               <option *ngFor="let cat of categories" [value]="cat">
                 {{ getCategoryTranslation(cat) }}
               </option>
             </select>
              <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-4 text-gray-500">
                <svg class="h-4 w-4 fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/></svg>
              </div>
          </div>
        </div>

        <!-- Priority -->
        <div>
          <label class="block text-sm font-bold text-gray-500 mb-2 uppercase tracking-wide">{{ languageService.t.priority }}</label>
          <div class="flex gap-3">
            <label *ngFor="let p of priorities" class="cursor-pointer relative flex-1">
               <input type="radio" formControlName="priority" [value]="p" class="peer sr-only">
               <span class="block px-2 py-3 rounded-xl text-center text-xs font-bold capitalize transition-all select-none
                  text-gray-500 bg-[#E0E5EC]
                  shadow-[5px_5px_10px_#bebebe,-5px_-5px_10px_#ffffff]
                  peer-checked:shadow-[inset_5px_5px_10px_#bebebe,inset_-5px_-5px_10px_#ffffff]
                  peer-checked:text-blue-500"
                  [ngClass]="{
                     'peer-checked:text-red-500': p === 'high',
                     'peer-checked:text-orange-500': p === 'medium',
                     'peer-checked:text-green-500': p === 'low'
                  }">
                  {{ getPriorityTranslation(p) }}
               </span>
            </label>
          </div>
        </div>
      </div>

      <div class="flex justify-end gap-4">
        <button type="button" (click)="onCancel.emit()" class="px-6 py-3 rounded-xl text-gray-500 font-bold hover:text-gray-700 bg-[#E0E5EC] shadow-[5px_5px_10px_#bebebe,-5px_-5px_10px_#ffffff] active:shadow-[inset_2px_2px_5px_#bebebe,inset_-2px_-2px_5px_#ffffff] transition-all">
          {{ languageService.t.cancel }}
        </button>
        <button type="submit" [disabled]="taskForm.invalid" class="px-8 py-3 rounded-xl bg-[#E0E5EC] text-blue-500 font-bold shadow-[5px_5px_10px_#bebebe,-5px_-5px_10px_#ffffff] active:shadow-[inset_2px_2px_5px_#bebebe,inset_-2px_-2px_5px_#ffffff] hover:text-blue-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed">
          {{ isEditMode ? languageService.t.update : languageService.t.create }}
        </button>
      </div>
    </form>
